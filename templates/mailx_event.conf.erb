# Will send mails by default. Anything that should get included has to happen before this point.
<% if @abrt_mail -%>
# puppet 'abrt' module: using custom mail subjects
EVENT=post-create
    <%- if (@abrt_mailx_detailed_subject || @detailedmailsubject) -%>
        if test -f executable; then
          if test -f package; then
            export Mailx_Subject="<%= @fqdn %> [<%= @hostgroup %>] abrt crash report for `cat executable` [`cat package`]"
          else
            export Mailx_Subject="<%= @fqdn %> [<%= @hostgroup %>] abrt crash report for `cat executable`"
          fi
        elif test -f package; then
           export Mailx_Subject="<%= @fqdn %> [<%= @hostgroup %>] abrt crash report for [`cat package`]"
        fi
    <%- end -%>
        reporter-mailx --notify-only -c /etc/libreport/plugins/mailx.conf
<% else -%>
#  puppet 'abrt' module: mail sending was suppressed
<% end -%>
